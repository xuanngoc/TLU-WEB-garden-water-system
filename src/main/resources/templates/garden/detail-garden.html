<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{fragments/layout}">
<head>
    <title th:text="${garden.name}"></title>

    <link rel="stylesheet" type="text/css" media="all"
          href="../../css/layout.css" th:href="@{/css/detail-garden.css}" />
    <script type="text/javascript" th:src="@{/js/detail-garden.js}"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

</head>
<body>
<div layout:fragment="content" th:remove="tag" class="container" id="layoutSidenav_content">
    <div>
        <h2 th:text="${'Chi ti·∫øt ' + garden.name}" class="text-center mt-4  mb-4"></h2>

        <div>
            <h4 class="text-left ml-10"> üçÄ Danh s√°ch c√°c thi·∫øt b·ªã thu·ªôc khu v∆∞·ªùn</h4>
            <div class="col-sm-3 btn bg-primary float-right mb-3">
                <a th:href="${'/garden/' + garden.id + '/new-device'}" class="text-light">Th√™m thi·∫øt b·ªã</a>
            </div>
            <table class="table table-striped">
                <tr>
                    <th>S·ªë th·ª© t·ª±</th>
                    <!--<th>Id</th>-->
                    <th>T√™n thi·∫øt b·ªã</th>
                    <th>Lo·∫°i thi·∫øt b·ªã</th>
                    <th>T√¨nh tr·∫°ng</th>
                    <th>On/Off</th>
                    <th>S·ª≠a</th>
                    <th>X√≥a</th>
                </tr>
                <tr th:each="device, itor : ${garden.devices}">
                    <td th:text="${itor.count}"></td>
                    <td th:text="${device.name}"></td>
                    <td th:text="${device.deviceType.name}"></td>
                    <td th:text="${device.status}"></td>
                    <td th:switch="${device.status}">
                        <label th:case="${'Ho·∫°t ƒë·ªông'}" class="switch">
                            <input type="checkbox" th:id="'toggle-btn-device-' + ${device.id}" th:onclick="|toggle(${device.state}, ${device.id}) |" th:checked="${device.state}">
                            <span class="slider round"></span>
                        </label>
                        <!--<label th:case="Ho·∫°t ƒë·ªông" class="switch">
                            <input type="checkbox" th:id="'toggle-btn-device-' + ${device.id}" th:onclick="|toggle(${device.state}, ${device.id}) |" th:checked="${device.state}">
                            <span class="slider round"></span>
                        </label>-->
                        <label th:case="*" class="switch" >
                            <input disabled type="checkbox" th:id="'toggle-btn-device-' + ${device.id}" th:onclick="|toggle(${device.state}, ${device.id}) |" >
                            <span class="slider round"></span>
                        </label>
                    </td>
                    <td><a th:href="${'/garden/' + garden.id + '/device/update/' + device.id}">Edit</a></td>
                    <td><a th:href="${'/garden/' + garden.id + '/device/delete/' + device.id}">Delete</a></td>
                </tr>
            </table>
        </div>

        <hr class="mt-10 mb-20">
        <hr class="mt-10 mb-20">

        <div>
            <h4 class="text-left ml-10"> üçÄ Danh s√°ch c√°c c·∫£m bi·∫øn thu·ªôc khu v∆∞·ªùn</h4>
            <div class="col-sm-3 btn bg-primary float-right mb-3">
                <a th:href="${'/garden/' + garden.id + '/sensor/new'}" class="text-light">Th√™m sensor</a>
            </div>
            <table class="table table-striped">
                <tr>
                    <th>S·ªë th·ª© t·ª±</th>
                    <!--<th>Id</th>-->
                    <th>T√™n c·∫£m bi·∫øn</th>
                    <th>Lo·∫°i c·∫£m bi·∫øn</th>
                    <th>T√¨nh tr·∫°ng</th>
                    <th>B·∫≠t / T·∫Øt</th>
                    <th>S·ª≠a</th>
                    <th>X√≥a</th>
                </tr>
                <tr th:each="sensor, itor : ${garden.sensors}">
                    <td th:text="${itor.count}"></td>
                    <td th:text="${sensor.name}"></td>
                    <td th:text="${sensor.sensorType.name}"></td>
                    <td th:text="${sensor.status}"></td>
                    <td th:switch="${sensor.status}">
                        <label th:case='${"Ho·∫°t ƒë·ªông"}' class="switch">
                            <input type="checkbox" th:id="'toggle-btn-sensor-' + ${sensor.id}" th:onclick="|toggleSensor(${sensor.state}, ${sensor.id}) |" th:checked="${sensor.state}">
                            <span class="slider round"></span>
                        </label>
                        <label th:case='${"*"}' class="switch">
                            <input disabled type="checkbox" th:id="'toggle-btn-sensor-' + ${sensor.id}" th:onclick="|toggleSensor(${sensor.state}, ${sensor.id}) |">
                            <span class="slider round"></span>
                        </label>
                    </td>
                    <td><a th:href="${'/garden/' + garden.id + '/sensor/update/' + sensor.id}">Edit</a></td>
                    <td><a th:href="${'/garden/' + garden.id + '/sensor/delete' + sensor.id}">Delete</a></td>
                </tr>
            </table>
        </div>
    </div>

    <hr>
    <hr>
    
    <canvas id="myChart" width="400" height="200"></canvas>
    <script type="text/javascript" th:src="@{/js/sensor-chart.js}"></script>

</div>
</body>
</html>